ScreenManager:
    InitialScreen:
    HistoryScreen:

<InitialScreen@Screen>:
    name: 'initial_screen'

    FitImage:
        source: "background.jpg"
    
    MDBoxLayout:
        orientation: 'vertical'
        padding: '24dp'
        spacing: '16dp'

        Image:
            source: "expenses.png"
            size_hint: None, None
            size: "150dp", "150dp"
            pos_hint: {"center_x": 0.5}
        
        MDLabel:
            text: "Registro Financeiro"
            halign: "center"
            theme_text_color: "Custom"
            text_color: (0.06, 0.02, 0.69, 1)
            theme_font_name: "Custom"
            font_name: "BebasNeue-Regular.ttf"
            font_style: "Display"
            role: "small"
        
        MDTextField:
            id: description
            mode: "filled"
            MDTextFieldHintText:
                text: "Descrição da Despesa"
                theme_font_name: "Custom"
                font_name: "FjallaOne-Regular.ttf"
        
        MDTextField:
            id: category
            mode: "filled"
            MDTextFieldHintText:
                text: "Categoria da Despesa"
                theme_font_name: "Custom"
                font_name: "FjallaOne-Regular.ttf"
        
        MDTextField:
            id: value
            mode: "filled"
            MDTextFieldHintText:
                text: "Valor da Despesa"
                theme_font_name: "Custom"
                font_name: "FjallaOne-Regular.ttf"
        
        Widget:
            size_hint_y: None
            height: "20dp"
        
        MDBoxLayout:
            orientation: 'horizontal'
            size_hint_x: None
            width: self.minimum_width
            spacing: dp(20) 
            padding: [0, dp(20), 0, dp(40)]
            pos_hint: {'center_x': 0.5}

            MDButton:
                style: "filled"
                theme_bg_color: "Custom"
                md_bg_color: "yellow"
                pos_hint: {'center_x': 0.5}
                on_release:
                    app.root.current = 'history_screen'
                    app.load_expenses()
                MDButtonText:
                    text: "Visualizar histórico de despesas"
                    theme_font_name: "Custom"
                    font_name: "FjallaOne-Regular.ttf"
                    theme_text_color: "Custom"
                    text_color: "black"
            
            MDButton:
                style: "filled"
                theme_bg_color: "Custom"
                md_bg_color: "blue"
                pos_hint: {'center_x': 0.5}
                on_release:
                    app.add_expense()
                MDButtonText:
                    text: "Adicionar despesas"
                    theme_font_name: "Custom"
                    font_name: "FjallaOne-Regular.ttf"
                    theme_text_color: "Custom"
                    text_color: "white"
        
        MDBoxLayout:
            orientation: "vertical"
            padding: "16dp"
            spacing: "10dp"
            MDBoxLayout:
                size_hint: None, None
                height: '45dp'
                width: '180dp'
                padding: [10, 10]
                md_bg_color: (0.9, 0.9, 0.9, 1)
                radius: [12]
                pos_hint: {"center_x": 0.5}
                MDLabel:
                    text: 'Total: ' + app.total
                    halign: 'center'
                    theme_text_color: "Custom"
                    text_color: (0.29, 0.62, 0.15, 1)
                    theme_font_name: "Custom"
                    font_name: "BebasNeue-Regular.ttf"
                    font_style: "Headline"
                    role: "small"
                    padding: [0, 12]

<HistoryScreen@Screen>:
    name: 'history_screen'

    FitImage:
        source: "background.jpg"
    
    MDBoxLayout:
        orientation: 'vertical'
        size_hint_y: 1.0
        spacing: '5dp'

        MDLabel:
            text:  "Historico de Despesas"
            halign: "center"
            theme_text_color: "Custom"
            text_color: (0.06,0.02,0.69,1)
            theme_font_name: "Custom"
            font_name: "BebasNeue-Regular.ttf"
            font_style: "Display"
            role: "small"
            size_hint_y: 0.1
        
        ScrollView:
            size_hint_y: 0.8

            MDBoxLayout:
                orientation: 'vertical'
                spacing: '1dp'
                size_hint_y: None
                height: self.minimum_height

                MDList:
                    id: expense_list
                    padding: [0, 4]
                
                MDBoxLayout:
                    id: popup_container
                    size_hint_y: None
                    height: '200dp'
                    size_hint_x: 0.9
                    pos_hint: {'center_x': 0.5}
                    padding: '10dp'

    MDBoxLayout:
        orientation: 'horizontal'
        size_hint_y: 0.1
        size_hint_x: None
        width: self.minimum_width
        spacing: dp(20) 
        padding: [0, dp(20), 0, dp(40)]
        pos_hint: {'center_x': 0.5}

        MDButton:
            style: "filled"
            theme_bg_color: "Custom"
            md_bg_color: "orange"
            size_hint_x: 0.7
            on_release: app.open_chart()
            MDButtonText:
                text: "Veja o gráfico de despesas"
                theme_font_name: "Custom"
                font_name: "FjallaOne-Regular.ttf"
                theme_text_color: "Custom"
                text_color: "white"
        
        MDButton:
            style: "filled"
            theme_bg_color: "Custom"
            md_bg_color: "red"
            size_hint_x: 0.3
            on_release: app.root.current = 'initial_screen'
            MDButtonText:
                text: "Voltar"
                theme_font_name: "Custom"
                font_name: "FjallaOne-Regular.ttf"
                theme_text_color: "Custom"
                text_color: "white"